; File generated with Shader Minifier 1.1.4
; http://www.ctrl-alt-test.fr

_main_shader_glsl:
	db 'float v=F[0];'
	db 'uniform sampler2D S;'
	db 'vec3 m=vec3(0.,.01,1.);'
	db 'vec4 f(vec2 v)'
	db '{'
	db   'return texture2D(S,(v+.5)/textureSize(S,0));'
	db '}'
	db 'const float y=6.36e+06,z=6.38e+06,x=2000.,e=4000.,n=1000.,s=.76,w=s*s,i=8000.,r=1200.;'
	db 'float t=10.;'
	db 'const vec3 a=vec3(0.,-y,0.),p=vec3(5.8e-06,1.35e-05,3.31e-05),d=vec3(2e-05),l=d*1.1;'
	db 'vec3 c=vec3(1.,.001,1.);'
	db 'float h(vec3 v)'
	db '{'
	db   'return mix(f(v.xz).x,f(v.yx).y,.5);'
	db '}'
	db 'float g(vec3 v)'
	db '{'
	db   'return.75*h(v)+.125*h(v*4.3);'
	db '}'
	db 'float D(vec3 v)'
	db '{'
	db   'float f=g(v*.001);'
	db   'f=smoothstep(.49,.5,f);'
	db   'return f;'
	db '}'
	db 'bool u=true;'
	db 'vec2 o(vec3 O)'
	db '{'
	db   'float z=max(0.,length(O-a)-y);'
	db   'vec2 m=vec2(exp(-z/i),exp(-z/r)*4.);'
	db   'if(u)'
	db     '{'
	db       'if(x<z&&z<e)'
	db         'm.y+=50.*step(length(O),50000.)*smoothstep(x,x+n,z)*smoothstep(e,e-n,z)*D(O+vec3(0.,0.,v*80.));'
	db     '}'
	db   'return m;'
	db '}'
	db 'float D(vec3 v,vec3 y,float z)'
	db '{'
	db   'vec3 O=v-a;'
	db   'float m=dot(O,y),f=dot(O,O)-z*z,c=m*m-f;'
	db   'if(c<0.)'
	db     'return-1.;'
	db   'float x=sqrt(c),P=-m-x,e=-m+x;'
	db   'return P>=0.?P:e;'
	db '}'
	db 'vec2 D(vec3 v,vec3 f,float m,float y)'
	db '{'
	db   'vec2 z=vec2(0.);'
	db   'm/=y;'
	db   'f*=m;'
	db   'for(float s=0.;s<y;++s)'
	db     'z+=o(v+f*s);'
	db   'return z*m;'
	db '}'
	db 'vec3 f(vec3 v,vec3 m,float y)'
	db '{'
	db   'vec2 s=D(v,m,y,32.);'
	db   'return exp(-(p*s.x+l*s.y));'
	db '}'
	db 'void D(vec3 v,vec3 f,float m,float x,inout vec2 O,inout vec3 i,inout vec3 r)'
	db '{'
	db   'm/=x;'
	db   'f*=m;'
	db   'for(float s=0.;s<x;++s)'
	db     '{'
	db       'vec3 Q=v+f*s;'
	db       'vec2 V=o(Q)*m;'
	db       'O+=V;'
	db       'vec2 Y=O;'
	db       'float P=D(Q,c,y+e);'
	db       'if(P>0.)'
	db         'Y+=D(Q,c,P,16.);'
	db       'else'
	db         ' P=0.;'
	db       'Y+=D(Q+c*P,c,D(Q,c,z),4.);'
	db       'vec3 t=exp(-(p*Y.x+l*Y.y));'
	db       'i+=t*V.x;'
	db       'r+=t*V.y;'
	db     '}'
	db '}'
	db 'vec3 f(vec3 v,vec3 m,float O,vec3 z)'
	db '{'
	db   'vec2 f=vec2(0.);'
	db   'vec3 P=vec3(0.),Y=vec3(0.);'
	db   'float Q=D(v,m,y+x);'
	db   'if(O<Q)'
	db     'D(v,m,O,16.,f,P,Y);'
	db   'else'
	db     '{'
	db       'float V=D(v,m,y+e);'
	db       'D(v,m,Q,32.,f,P,Y);'
	db       'D(v+m*Q,m,V-Q,32.,f,P,Y);'
	db       'D(v+m*V,m,O-V,8.,f,P,Y);'
	db     '}'
	db   'float V=dot(m,c);'
	db   'return z*exp(-(p*f.x+l*f.y))+t*(1.+V*V)*(P*p*.0596831+Y*d*.119366*(1.-w)/((2.+w)*pow(1.+w-2.*s*V,1.5)));'
	db '}'
	db 'float C(vec3 v)'
	db '{'
	db   'return max(v.x,max(v.y,v.z));'
	db '}'
	db 'float b(vec2 v)'
	db '{'
	db   'return max(v.x,v.y);'
	db '}'
	db 'float q(vec2 v)'
	db '{'
	db   'return min(v.x,v.y);'
	db '}'
	db 'vec2 C(vec2 v,vec2 z)'
	db '{'
	db   'return mod(v,z)-z*.5;'
	db '}'
	db 'float Z=0.;'
	db 'vec2 Y=vec2(0.);'
	db 'float X=0.;'
	db 'const float W=4.;'
	db 'vec4 V,U;'
	db 'float D(vec4 v,vec2 z)'
	db '{'
	db   'V=f(z);'
	db   'U=f(z/8.);'
	db   'float y=3.*(2.+floor(V.w*4.)+20.*smoothstep(.8,.99,V.w)*smoothstep(.6,.9,U.w));'
	db   'return min(min(max(C(v.xyz+V.xyz*4.),v.w-y),max(C(v.xyz+V.zxw*7.),v.w-y-3.*floor(V.w*4.))),max(C(v.yzx+10.*V.xyz),v.w-y+3.*floor(V.y*2.)));'
	db '}'
	db 'float T(vec3 v)'
	db '{'
	db   'vec2 m=normalize(vec2(-1.,2.));'
	db   'float z=12.-abs(dot(m,v.xz)),y=dot(vec2(m.y,-m.x),v.xz);'
	db   'vec2 f=floor(v.xz/30.);'
	db   'v.xz=C(v.xz,vec2(30.));'
	db   'vec3 O=vec3(abs(v.xz)-15.,z);'
	db   'float Q=min(b(O.xy),-O.z),P=D(vec4(O+W,v.y),f);'
	db   'Y=mix(vec2(b(O.xy)+W,q(O.xy)),vec2(O.z,y),step(0.,O.z));'
	db   'float x=v.y;'
	db   'Z=1.;'
	db   'if(P<x)'
	db     'x=P,Z=0.,Y=O.xy;'
	db   'return min(x,-Q+W);'
	db '}'
	db 'float R;'
	db 'vec3 Q,P,O,N;'
	db 'void M(float v)'
	db '{'
	db   'for(int f=0;f<800;++f)'
	db     '{'
	db       'O=Q+P*R;'
	db       'float m=T(O);'
	db       'R+=m;'
	db       'if(m<.0003*R||R>v)'
	db         'return;'
	db     '}'
	db   'R=v;'
	db '}'
	db 'float L=.3,K;'
	db 'float J(vec3 v)'
	db '{'
	db   'return mix(max(0.,dot(N,v))/3.,max(0.,pow(dot(N,normalize(v-P)),K)*(K+8.)/24.),L);'
	db '}'
	db 'float I(vec3 v)'
	db '{'
	db   'return v-=O,J(normalize(v))/dot(v,v);'
	db '}'
	db 'void main()'
	db '{'
	db   'vec2 x=gl_FragCoord.xy/vec2(0.,0.)*2.-1.;'
	db   'x.x*=vec2(0.,0.).x/vec2(0.,0.).y;'
	db   'if(gl_FragCoord.y<10.)'
	db     '{'
	db       'gl_FragColor=vec4(vec3(step(gl_FragCoord.x/vec2(0.,0.).x,v/208.)),1.);'
	db       'return;'
	db     '}'
	db   'vec3 y=vec3(0.);'
	db   'Q=vec3(mod(v*2.,10000.)-5000.,1000.+500.*sin(v/60.),mod(v*10.,10000.)-5000.);'
	db   'if(v<64.)'
	db     't=10.*v/64.,y=vec3(10000.,15000.,-10000.);'
	db   'else'
	db     ' if(v<128.)'
	db       '{'
	db         'Q.y=1000.;'
	db         'float s=(v-64.)/64.;'
	db         'Q=vec3(s*1000.,1500.,3000.);'
	db         'y=Q+vec3(-300.,0.,-300.);'
	db         'y.y=10.;'
	db         'c.y+=.01*s*s*s;'
	db       '}'
	db     'else'
	db       ' if(v<144.)'
	db         'c.y=.01;'
	db       'else'
	db         '{'
	db           'float s=(v-144.)/64.;'
	db           'Q=vec3(mod(s*2.,10000.)-500.,1000.-200.*s,mod(s*10.,10000.)-5000.);'
	db           'y.y=4000.*s;'
	db           'c.y=.01+2.*s;'
	db         '}'
	db   'c=normalize(c);'
	db   'P=normalize(Q-y);'
	db   'Q=vec3(-1.,4.,8.)*3.;'
	db   'P=-normalize(vec3(.7,-.17,.67));'
	db   'vec3 s=normalize(cross(m.xzx,P));'
	db   'P=mat3(s,normalize(cross(P,s)),P)*normalize(vec3(x,-2.));'
	db   'vec3 i=vec3(0.);'
	db   'const float e=10000.;'
	db   'M(e);'
	db   'if(R<e)'
	db     '{'
	db       'N=normalize(vec3(T(O+m.yxx),T(O+m.xyx),T(O+m.xxy))-T(O));'
	db       'float p=max(-Y.x,-Y.y),n=mod(O.y,3.),r=floor(p/2.),d=floor(O.y/3.),w=mod(p,2.),l=step(1.,n)*step(n,2.5)*step(.1,w)*step(w,1.9);'
	db       'vec3 a=mix(vec3(.1)+.02*V.yzw,vec3(.6),l)*(.1+.9*smoothstep(0.,24.,O.y));'
	db       'L=mix(.3,.8,l);'
	db       'K=mix(18.,10000.,l);'
	db       'if(Z>0.)'
	db         'l=0.,L=.2,K=80.,a=mix(vec3(.3)*(.1+.3*smoothstep(-2.,1.,Y.x)),vec3(.01+.9*step(3.9,mod(Y.x,4.)*step(.5,fract(Y.y/4.)))),step(1.,Y.x));'
	db       'i+=f(O,c,D(O,c,z))*t*J(c);'
	db       'vec4 W=vec4(floor(O.xz/30.)*30.,0.,30.);'
	db       'i+=50.*vec3(.9,.5,.2)*(I(vec3(W.xy,3.).xzy)+I(vec3(W.xy+W.zw*V.x,3.).xzy)+I(vec3(W.xy+W.wz*V.y,3.).xzy)+I(vec3(W.xy+W.ww*V.z,3.).xzy));'
	db       'vec3 C=vec3(-c.x,c.y,-c.z);'
	db       'u=false;'
	db       'L=.5;'
	db       'i+=f(O,C,D(O,C,z),vec3(0.))*J(C);'
	db       'u=true;'
	db       'i=f(Q,P,R,i*a);'
	db     '}'
	db   'else'
	db     ' i=f(Q,P,D(Q,P,z),vec3(0.));'
	db   'gl_FragColor=vec4(pow(i,vec3(1./2.2)),.9);'
	db '}', 0

