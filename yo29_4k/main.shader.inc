; File generated with Shader Minifier 1.1.4
; http://www.ctrl-alt-test.fr

_main_shader_glsl:
	db 'vec3 v=vec3(vec2(0.,0.),v[0]);'
	db 'float y=v.z;'
	db 'uniform sampler2D S;'
	db 'vec3 m=vec3(0.,.01,1.);'
	db 'vec4 f(vec2 y)'
	db '{'
	db   'return texture2D(S,(y+.5)/textureSize(S,0));'
	db '}'
	db 'const float z=6.36e+06,x=6.38e+06,w=1000.,e=2500.,s=500.,n=.76,d=n*n,t=8000.,l=1200.;'
	db 'float i=10.;'
	db 'const vec3 a=vec3(0.,-z,0.),p=vec3(5.8e-06,1.35e-05,3.31e-05),r=vec3(2e-05),o=r*1.1;'
	db 'vec3 c=vec3(1.,.01,1.);'
	db 'float h(vec3 v)'
	db '{'
	db   'return(f(v.xz).x+f(v.yx).y)*.5;'
	db '}'
	db 'bool g=true;'
	db 'vec2 D(vec3 v)'
	db '{'
	db   'float x=max(0.,length(v-a)-z);'
	db   'vec2 f=vec2(exp(-x/t),exp(-x/l)*8.);'
	db   'if(g&&w<x&&x<e)'
	db     '{'
	db       'vec3 m=.0015*(v+y*vec3(-90.,0.,80.));'
	db       'f.y+=250.*step(m.z,38.)*smoothstep(w,w+100.,x)*smoothstep(e,e-1000.,x)*smoothstep(.5,.55,.75*h(m)+.125*h(m*4.3+max(y,144.))+.0625*h(m*9.9)+.0625*h(m*17.8)-.1);'
	db     '}'
	db   'return f;'
	db '}'
	db 'float D(vec3 v,vec3 y,float x)'
	db '{'
	db   'vec3 m=v-a;'
	db   'float f=dot(m,y),c=dot(m,m)-x*x,z=f*f-c;'
	db   'if(z<0.)'
	db     'return-1.;'
	db   'float L=sqrt(z),V=-f-L,e=-f+L;'
	db   'return V>=0.?V:e;'
	db '}'
	db 'vec4 u;'
	db 'vec2 D(vec3 v,vec3 f,float m,float y)'
	db '{'
	db   'vec2 z=vec2(0.);'
	db   'm/=y;'
	db   'f*=m;'
	db   'for(float x=u.w*.5;x<y;++x)'
	db     'z+=D(v+f*x);'
	db   'return z*m;'
	db '}'
	db 'vec3 f(vec3 v,vec3 m,float y)'
	db '{'
	db   'vec2 T=D(v,m,y,32.);'
	db   'return exp(-p*T.x-o*T.y);'
	db '}'
	db 'vec2 C;'
	db 'vec3 b,q;'
	db 'void f(vec3 v,vec3 f,float m,float y)'
	db '{'
	db   'm/=y;'
	db   'f*=m;'
	db   'for(float i=u.z;i<y;++i)'
	db     '{'
	db       'vec3 K=v+f*i;'
	db       'vec2 T=D(K)*m;'
	db       'C+=T;'
	db       'vec2 s=C;'
	db       'float L=max(0.,D(K,c,z+e));'
	db       'if(L>0.)'
	db         's+=D(K,c,L,16.);'
	db       's+=D(K+c*L,c,D(K,c,x),4.);'
	db       'vec3 w=exp(-p*s.x-o*s.y);'
	db       'b+=w*T.x;'
	db       'q+=w*T.y;'
	db     '}'
	db '}'
	db 'vec3 h(vec3 v,vec3 m,float y,vec3 x)'
	db '{'
	db   'C=vec2(0.);'
	db   'b=q=vec3(0.);'
	db   'float L=D(v,m,z+w);'
	db   'if(y<L)'
	db     'f(v,m,y,16.);'
	db   'else'
	db     '{'
	db       'float s=D(v,m,z+e);'
	db       'f(v,m,L,16.);'
	db       'f(v+m*L,m,s-L,40.);'
	db       'f(v+m*s,m,y-s,8.);'
	db     '}'
	db   'float s=dot(m,c);'
	db   'return x*exp(-p*C.x-o*C.y)+i*(1.+s*s)*(b*p*.0596831+q*r*.119366*(1.-d)/((2.+d)*pow(1.+d-2.*n*s,1.5)));'
	db '}'
	db 'float Z(vec3 v)'
	db '{'
	db   'return max(v.x,max(v.y,v.z));'
	db '}'
	db 'float Y(vec2 v)'
	db '{'
	db   'return max(v.x,v.y);'
	db '}'
	db 'float X(vec2 v)'
	db '{'
	db   'return min(v.x,v.y);'
	db '}'
	db 'vec2 D(vec2 v,vec2 y)'
	db '{'
	db   'return mod(v,y)-y*.5;'
	db '}'
	db 'float W=0.;'
	db 'vec2 V=vec2(0.);'
	db 'const float U=4.;'
	db 'vec4 T,R;'
	db 'const vec2 Q=normalize(vec2(-1.,2.)),P=mat2(0.,1.,-1.,0.)*Q;'
	db 'float O(vec3 v)'
	db '{'
	db   'float y=12.-abs(dot(Q,v.xz)),x=dot(P,v.xz),m=length(v.xz);'
	db   'W=1.;'
	db   'if(m>5000.)'
	db     'return v.y-min(1.,(m-5000.)/500.)*400.*f(v.xz/300.).x;'
	db   'float K=v.y;'
	db   'vec2 z=floor(v.xz/30.);'
	db   'v.xz=D(v.xz,vec2(30.));'
	db   'T=f(z);'
	db   'R=f(z/8.);'
	db   'vec3 c=vec3(abs(v.xz)-15.,y),M=vec3(c+U);'
	db   'float s=min(Y(c.xy),-c.z),L=3.*floor(2.+T.w*4.+20.*smoothstep(.8,.99,T.w)*smoothstep(.6,.9,R.w)),n=min(min(max(Z(M.xyz+T.xyz*4.),v.y-L),max(Z(M.xyz+T.zxw*7.),v.y-L-3.*floor(T.w*4.))),max(Z(M.yzx+10.*T.xyz),v.y-L+3.*floor(T.y*2.)));'
	db   'V=mix(vec2(Y(c.xy)+U,X(c.xy)),vec2(c.z,x),step(0.,c.z));'
	db   'if(n<K)'
	db     'K=n,W=0.,V=c.xy;'
	db   'return max(v.y-90.,min(K,-s+U));'
	db '}'
	db 'float N;'
	db 'vec3 M,L,K,J;'
	db 'void I(float y)'
	db '{'
	db   'for(int f=0;f<800;++f)'
	db     '{'
	db       'K=M+L*N;'
	db       'float m=O(K);'
	db       'N+=m;'
	db       'if(m<N/v.x||N>y)'
	db         'return;'
	db     '}'
	db   'N=y;'
	db '}'
	db 'float H,G;'
	db 'float E(vec3 v)'
	db '{'
	db   'return mix(max(0.,dot(J,v))/3.,pow(max(0.,dot(J,normalize(v-L))),G)*(G+8.)/24.,H);'
	db '}'
	db 'float B(vec3 v)'
	db '{'
	db   'return v-=K,E(normalize(v))/dot(v,v);'
	db '}'
	db 'void main()'
	db '{'
	db   'u=f(gl_FragCoord.xy+y*10000.);'
	db   'vec3 z=vec3(0.);'
	db   'M=vec3(-300.,200.,mod(y,64.)*4.);'
	db   'if(y<32.)'
	db     'z=vec3(0.,340.,200.);'
	db   'else'
	db     ' if(y<64.)'
	db       '{'
	db         'float s=(y-64.)/64.;'
	db         'M=vec3(s*100.,250.,-36.);'
	db         'z=M+vec3(-30.,0.,-30.);'
	db         'z.y=10.;'
	db         'c.y+=.01*s*s*s;'
	db       '}'
	db     'else'
	db       ' if(y<128.)'
	db         ';'
	db       'else'
	db         ' if(y<144.)'
	db           'M.z-=300.,M.x+=100.,z=vec3(M.x+9.,90.,M.z+20.),M.y=100.;'
	db         'else'
	db           '{'
	db             'float s=(y-144.)/64.;'
	db             'z=vec3(500.,smoothstep(204.,232.,y)*800.,200.);'
	db             'M=vec3(-400+s*100.,230.-s*10.,-130.-s*140.);'
	db             'c.y=.01+s*1.5;'
	db           '}'
	db   'c=normalize(c);'
	db   'L=normalize(M-z);'
	db   'vec3 s=normalize(cross(m.xzx,L));'
	db   'L=mat3(s,normalize(cross(L,s)),L)*normalize(vec3((gl_FragCoord.xy+u.xy)/v.xy*2.-1.,-2.)*vec3(v.x/v.y,1.,1.));'
	db   'vec3 w=vec3(0.);'
	db   'const float e=10000.;'
	db   'I(e);'
	db   'if(N<e)'
	db     '{'
	db       'J=normalize(vec3(O(K+m.yxx),O(K+m.xyx),O(K+m.xxy))-O(K));'
	db       'vec2 n=vec2(Y(-V),K.y),d=mod(n,vec2(3.)),p=floor(n/3.);'
	db       'float r=step(1.3,d.y)*step(.8,d.x);'
	db       'vec3 t=mix(vec3(.1)+.02*T.yzw,vec3(.1),r)*(.1+.9*smoothstep(0.,24.,K.y));'
	db       'H=mix(.3,.8,r);'
	db       'G=mix(18.,10000.,r);'
	db       'if(W>0.)'
	db         'r=0.,H=.2,G=80.,t=mix(vec3(.3)*(.1+.3*smoothstep(-2.,1.,V.x)),vec3(.01+.9*step(3.9,mod(V.x,4.))*step(.5,fract(V.y/4.))),step(1.,V.x));'
	db       'w+=f(K,c,D(K,c,x))*i*E(c);'
	db       'vec2 a=floor((K.xz+15.)/30.);'
	db       'w+=250.*mix(vec3(.9,.5,.2),vec3(.2,.5,.9),T.z*.5)*T.w*B(vec3(30.*(a+(f(a).xy-.5)),3.).xzy)*smoothstep(144.,140.,y-T.w*4.-R.w*8.);'
	db       'float U=-700.,o=1000.;'
	db       'for(float b=0;b<20.;++b)'
	db         '{'
	db           'vec4 C=f(vec2(b));'
	db           'vec2 q=3.*(floor(C.w*3.)+1.)*Q,l=q+P*(mod(-y*(9.-2.*C.x)+o*C.y,o)+U),Z=-q+P*(mod(y*(9.-2.*C.x)+o*C.y,o)+U);'
	db           'w+=20.*vec3(.9,.1,0.)*(B(vec3(l.xy,1.).xzy)+B(vec3(Z.xy-P*3.,1.).xzy));'
	db           'w+=30.*vec3(.8,.8,.9)*(B(vec3(Z.xy,1.).xzy)+B(vec3(l.xy-P*3.,1.).xzy));'
	db         '}'
	db       'vec3 b=vec3(-c.x,c.y,-c.z);'
	db       'g=false;'
	db       'w+=h(K,b,D(K,b,x),vec3(0.))*6.*E(b);'
	db       'g=true;'
	db       'w=h(M,L,N,w*t);'
	db       'vec4 C=f(floor(p+K.xz/3.));'
	db       'w+=r*(vec3(.2,.15,.1)+.1*C.xyz)*smoothstep(.85,1.,C.w+.1*smoothstep(.34,.8,.2*T.w+.8*R.w)-max(0.,y-136.)/64.);'
	db     '}'
	db   'else'
	db     ' w=h(M,L,D(M,L,x),vec3(0.));'
	db   'gl_FragColor=vec4(pow(smoothstep(0.,32.,y)*w,vec3(1./2.2)),.3);'
	db '}', 0

